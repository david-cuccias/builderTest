"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var sdk=require("@builder.io/sdk"),core=require("@emotion/core"),React=require("react"),React__default=_interopDefault(React),ReactDOM=_interopDefault(require("react-dom")),hash=_interopDefault(require("hash-sum")),version="1.1.31-alpha.9",_a;"undefined"!=typeof window&&(null===(_a=window.parent)||void 0===_a||_a.postMessage({type:"builder.isReactSdk",data:{value:!0,supportsPatchUpdates:"v3",priorVersion:version}},"*"))
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */;var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function __decorate(e,t,n,r){var i,s=arguments.length,a=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(s<3?i(a):s>3?i(t,n,a):i(t,n))||a);return s>3&&a&&Object.defineProperty(t,n,a),a}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(i,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,o)}l((r=r.apply(e,t||[])).next())}))}function __generator(e,t){var n,r,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)r[i]=s[a];return r}var sizeNames=["xsmall","small","medium","large"],sizes={xsmall:{min:0,default:0,max:0},small:{min:320,default:321,max:640},medium:{min:641,default:642,max:991},large:{min:990,default:991,max:1200},getWidthForSize:function(e){return this[e].default},getSizeForWidth:function(e){for(var t=0,n=sizeNames;t<n.length;t++){var r=n[t];if(e<=this[r].max)return r}return"large"}},set=function(e,t,n){if(Object(e)!==e)return e;var r=Array.isArray(t)?t:t.toString().match(/[^.[\]]+/g);return r.slice(0,-1).reduce((function(e,t,n){return Object(e[t])===e[t]?e[t]:e[t]=Math.abs(Number(r[n+1]))>>0==+r[n+1]?[]:{}}),e)[r[r.length-1]]=n,e},safeDynamicRequire=sdk.Builder.isServer?eval("require"):function(){return null},fnCache={},api=function(e){return sdk.builder};function stringToFunction(e,t,n,r){if(void 0===t&&(t=!0),!e||!e.trim())return function(){};var i=e+":"+t;if(fnCache[i])return fnCache[i];var s=t&&!(e.includes(";")||e.includes(" return ")||e.trim().startsWith("return "))||e.trim().startsWith("builder.run"),a=function(){};e=e.replace(/builder\s*\.\s*use[a-zA-Z]*\(/g,"return(").replace(/builder\s*\.\s*set([a-zA-Z]+)To\(/g,(function(e,t){return'builder.set("'+(t[0].toLowerCase()+t.substring(1))+'",'})).replace(/builder\s*\.\s*get([a-zA-Z]+)\s*\(\s*\)/g,(function(e,t){return"state."+(t[0].toLowerCase()+t.substring(1))}));try{sdk.Builder.isBrowser&&(a=new Function("state","event","block","builder","Device","update","Builder","context","\n          var names = [\n            'state',\n            'event',\n            'block',\n            'builder',\n            'Device',\n            'update',\n            'Builder',\n            'context'\n          ];\n          var rootState = state;\n          if (typeof Proxy !== 'undefined') {\n            rootState = new Proxy(rootState, {\n              set: function () {\n                return false;\n              },\n              get: function (target, key) {\n                if (names.includes(key)) {\n                  return undefined;\n                }\n                return target[key];\n              }\n            });\n          }\n          /* Alias */\n          var ctx = context;\n          with (rootState) {\n            "+(s?"return ("+e+");":e)+";\n          }\n        "))}catch(t){n&&n.push(t);var o=t&&t.message;o&&"string"==typeof o&&r&&-1===r.indexOf(o)&&r.push(o),sdk.Builder.isBrowser&&console.warn("Function compile error in "+e,t)}return fnCache[i]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{if(sdk.Builder.isBrowser)return a.apply(void 0,t);var i=safeDynamicRequire("vm2").VM,s=t[0],o=t[1];return new i({timeout:100,sandbox:__assign(__assign(__assign(__assign({},s),{state:s}),{builder:api}),{event:o})}).run(e.replace(/(^|;)return /,"$1"))}catch(t){sdk.Builder.isBrowser?console.warn("Builder custom code error:",t.message||t,"in",e,t.stack||t):process.env.DEBUG&&console.debug("Builder custom code error:",t.message||t,"in",e,t.stack||t),n&&n.push(t)}}}var isPromise=function(e){return"function"==typeof e.then},isRequestInfo=function(e){return!isPromise(e)},BuilderAsyncRequestsContext=React__default.createContext({requests:[],errors:[],logs:[]}),BuilderStoreContext=React__default.createContext({state:{},rootState:{},content:{},context:{},update:function(e){return null}}),applyPatchWithMinimalMutationChain=function(e,t,n){if(void 0===n&&(n=!0),Object(e)!==e)return e;var r=t.path,i=t.op,s=t.value,a=r.split(/\//);""===a[0]&&a.shift();for(var o=n?e:__assign({},e),l=o,u=0;u<a.length;u++){var d=u===a.length-1,c=a[u];if(d){if("replace"===i)l[c]=s;else if("add"===i){var p=Number(c);Array.isArray(l)?"-"===c?l.push(s):l.splice(p,0,s):l[c]=s}else if("remove"===i){p=Number(c);Array.isArray(l)?l.splice(p,1):delete l[c]}}else{var f=a[u+1],h=Object(l[c])===l[c]?l[c]:String(Number(f))===f?[]:{};l=l[c]=Array.isArray(h)?__spreadArrays(h):__assign({},h)}}return o},htmlEscape=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},blockToHtmlString=function(e){var t;return("<"+htmlEscape(e.tagName||"div")+' \n    class="builder-block '+e.id+" "+(e.class||"")+'"\n    builder-id="'+e.id+'"\n  '+Object.keys(e.properties||{}).map((function(t){return htmlEscape(t)+'="'+htmlEscape(e.properties[t])+'"'})).join(" ")+"\n  >"+("Text"===(null===(t=null==e?void 0:e.component)||void 0===t?void 0:t.name)?e.component.options.text:e.children?e.children.map((function(e){return blockToHtmlString(e)})).join(""):"")+"</"+(e.tagName||"div")+">").replace(/\s+/g," ")},Link=function(e){return React__default.createElement(BuilderStoreContext.Consumer,null,(function(t){return t.renderLink?t.renderLink(e):React__default.createElement("a",__assign({},e))}))},camelCaseToKebabCase=function(e){return e?e.replace(/([A-Z])/g,(function(e){return"-"+e[0].toLowerCase()})):""},kebabCaseToCamelCase=function(e){return void 0===e&&(e=""),e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))},Device={desktop:0,tablet:1,mobile:2},blocksMap={},voidElements=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"]);function pick(e,t){return t.reduce((function(t,n){return e&&e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var last=function(e){return e[e.length-1]};function omit(e,t){for(var n=Object.assign({},e),r=0,i=t;r<i.length;r++){delete n[i[r]]}return n}var cssCase=function(e){if(!e)return e;var t=camelCaseToKebabCase(e);return e[0]===e[0].toUpperCase()&&(t="-"+t),t},fastClone=function(e){return JSON.parse(JSON.stringify(e))};function mapToCss(e,t,n){return void 0===t&&(t=2),void 0===n&&(n=!1),Object.keys(e).reduce((function(r,i){var s=e[i];return"string"!=typeof s?r:r+(s&&s.trim()?"\n"+" ".repeat(t)+cssCase(i)+": "+s+(n?" !important":"")+";":"")}),"")}function capitalize(e){if(e)return e[0].toUpperCase()+e.slice(1)}var BuilderBlock=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasError:!1,updates:0},t.privateState={state:{},rootState:{},context:{},update:function(){}},t.onWindowMessage=function(e){var n=e.data;if(n)switch(n.type){case"builder.selectionChange":if(!(s=n.data))break;var r=s.selection,i=t.block&&t.block.id;i&&Array.isArray(r)&&r.indexOf(i)>-1&&setTimeout((function(){window.$block=t,window.$blocks||(window.$blocks=[]),window.$blocks.push(t)}));break;case"builder.patchUpdates":var s;if(!(s=n.data)||!s.data)break;var a=s.data[t.block.id];if(!a)return;location.href.includes("builder.debug=true")&&t.eval("debugger");for(var o=__assign({},t.block),l=0,u=a;l<u.length;l++){var d=u[l];applyPatchWithMinimalMutationChain(o,d)}blocksMap[t.props.block.id]=o,t.setState({updates:t.state.updates+1})}},t}return __extends(t,e),Object.defineProperty(t.prototype,"store",{get:function(){return this.privateState},enumerable:!0,configurable:!0}),t.getDerivedStateFromError=function(e){return{hasError:!0}},t.prototype.componentDidCatch=function(e,t){console.error("Builder block error:",e,t)},t.prototype.stringToFunction=function(e,t){return void 0===t&&(t=!0),stringToFunction(e,t,this._errors,this._logs)},Object.defineProperty(t.prototype,"block",{get:function(){return blocksMap[this.props.block.id]||this.props.block},enumerable:!0,configurable:!0}),t.prototype.UNSAFE_componentWillReceiveProps=function(e){sdk.Builder.isEditing&&blocksMap[e.block.id]!==e.block&&(blocksMap[e.block.id]=e.block)},Object.defineProperty(t.prototype,"styles",{get:function(){var e,t=this.props.size,n=this.block,r=[],i=sizeNames.indexOf(t||"large");if(n.responsiveStyles)for(var s=i;s<sizeNames.length;s+=1){var a=sizeNames[s];n.responsiveStyles[a]&&r.push(n.responsiveStyles[a])}if(!!this.privateState.state.isServer){var o=n.animations&&n.animations[0],l=o&&o.steps&&o.steps[0],u=l&&l.styles;u&&(e=u)}return Object.assign.apply(Object,__spreadArrays([{}],r.reverse(),[e]))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"emotionCss",{get:function(){var e,t,n,r=this.block;if(sdk.Builder.isServer){var i=r.animations&&r.animations[0];if(i&&"hover"!==i.trigger){var s=i&&i.steps&&i.steps[0],a=s&&s.styles;a&&(n=a)}}var o=sizeNames.slice().reverse(),l=this.block,u={};if(l.responsiveStyles)for(var d=0,c=o;d<c.length;d++){var p=c[d];"large"===p?this.props.emailMode||(u["&.builder-block"]=Object.assign({},l.responsiveStyles[p],n)):u["@media only screen and (max-width: "+sizes[p].max+"px)"]={"&.builder-block":l.responsiveStyles[p]}}var f=r.animations&&r.animations.find((function(e){return"hover"===e.trigger}));return f&&(u[":hover"]=(null===(t=null===(e=f.steps)||void 0===e?void 0:e[1])||void 0===t?void 0:t.styles)||{},u.transition="all "+f.duration+"s "+camelCaseToKebabCase(f.easing),f.delay&&(u.transitionDelay=f.delay+"s")),u},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"css",{get:function(){var e=this.block,t=__assign({},e.responsiveStyles&&e.responsiveStyles.large),n=this.props.emailMode?"":".builder-block."+e.id+" {"+mapToCss(t)+"}",r=sizeNames.slice().reverse();if(e.responsiveStyles)for(var i=0,s=r;i<s.length;i++){var a=s[i];if((!this.props.emailMode||"large"!==a)&&("large"!==a&&"xsmall"!==a&&e.responsiveStyles[a]&&Object.keys(e.responsiveStyles[a]).length)){var o=["display","width","verticalAlign"],l=e.responsiveStyles[a],u=this.props.emailMode&&pick(l,o);n+="\n@media only screen and (max-width: "+sizes[a].max+"px) { \n"+(this.props.emailMode?".":".builder-block.")+e.id+(this.props.emailMode?"-subject":"")+" {"+mapToCss(this.props.emailMode?omit(l,o):l,4,this.props.emailMode)+" } }",this.props.emailMode&&u&&Object.keys(u).length&&(n+="\n@media only screen and (max-width: "+sizes[a].max+"px) { \n.builder-block."+e.id+" {"+mapToCss(u,4,!0)+" } }")}}var d=e.animations;if(!this.privateState.state.isBrowser&&d&&d.length){var c=d[0];if(c){var p=c.steps&&c.steps[0];if(p)p.styles&&(n+="\n.builder-block."+e.id+" {"+mapToCss(p,2,!0)+"}")}}return n},enumerable:!0,configurable:!0}),t.prototype.eval=function(e){return this.stringToFunction(e)(this.privateState.state,void 0,this.block,sdk.builder,Device,this.privateState.update,sdk.Builder,this.privateState.context)},t.prototype.componentWillUnmount=function(){sdk.Builder.isEditing&&removeEventListener("message",this.onWindowMessage)},t.prototype.componentDidMount=function(){var e=this,t=this.block,n=t&&t.animations;if(sdk.Builder.isEditing&&addEventListener("message",this.onWindowMessage),n){var r={animations:fastClone(n)};if(t.bindings)for(var i in t.bindings)if(i.startsWith("animations.")){var s=this.stringToFunction(t.bindings[i]);void 0!==s&&set(r,i,s(this.privateState.state,null,t,sdk.builder,null,null,sdk.Builder,this.privateState.context))}sdk.Builder.animator.bindAnimations(r.animations.filter((function(e){return"hover"!==e.trigger})).map((function(t){return __assign(__assign({},t),{elementId:e.block.id})})))}},t.prototype.getElement=function(e,n){var r,i,s,a=this;void 0===e&&(e=0),void 0===n&&(n=this.privateState.state);var o,l=this.props,u=(l.child,l.fieldName,this.block),d=(u.tagName||"div").toLowerCase();if("template"===d){var c=u.children?u.children.map((function(e){return blockToHtmlString(e)})).join(" "):"";return console.debug("template html",c),core.jsx("template",__assign({},u.properties,{dangerouslySetInnerHTML:{__html:c}}))}var p=u.component&&(u.component.name||u.component.component),f=null;u.component&&!u.component.class&&(u.component&&u.component.tag?o=u.component.tag:(f=sdk.Builder.components.find((function(e){return e.name===p}))||null)&&f.class?o=f.class:f&&f.tag&&(o=f.tag));var h=__assign(__assign({},u.properties),{style:{}});if(h=__assign(__assign({},h.properties),h),u.component&&(h.component=fastClone(u.component)),u.bindings)for(var v in u.bindings){var m=this.stringToFunction(u.bindings[v]);set(h,v,m(n,null,u,api(),Device,null,sdk.Builder,this.privateState.context))}if(h.hide)return null;if(delete h.hide,("show"in h||u.bindings&&u.bindings.show)&&!h.show)return null;if(delete h.show,u.actions){var g=function(e){var t=u.actions[e];h["on"+capitalize(e)]=function(e){var r=n;return"undefined"!=typeof Proxy&&(r=new Proxy(n,{set:function(e,t,n){return e[t]=n,a.privateState.rootState[t]=n,!0}})),a.stringToFunction(t,!1)(r,e,a.block,sdk.builder,Device,a.privateState.update,sdk.Builder,a.privateState.context)}};for(var v in u.actions)g(v)}var b=(h.component||h.options)&&__assign(__assign({},h.options),h.component.options||h.component.data),_=voidElements.has(d),y=f&&(f.fragment||f.noWrap),k=(null===(i=h.attr)||void 0===i?void 0:i.style)||("string"==typeof h.style?h.style:"")||"";if("string"==typeof k){"object"!=typeof h.style&&(h.style={});for(var S=0,B=k.split(";");S<B.length;S++){var C=B[S].split(":");if(!C.length)return;v=C[0],m=C[1];C.length>2&&(m=C.slice(1).join(":")),h.style[kebabCaseToCamelCase(v)]=m}}var w=__assign(__assign(__assign({},omit(h,["class","component","attr"])),((r={})["string"!=typeof d||d.includes("-")?"class":"className"]="builder-block "+this.id+(u.class?" "+u.class:"")+(!u.component||["Image","Video","Banner"].indexOf(p)>-1?"":" builder-has-component")+(h.class?" "+h.class:"")+(sdk.Builder.isEditing&&(null===(s=this.privateState.state._spacer)||void 0===s?void 0:s.parent)===u.id?" builder-spacer-parent":""),r.key=this.id+e,r["builder-id"]=this.id,r)),0!==e&&{"builder-index":e});sdk.Builder.isIframe&&(w["builder-inline-styles"]=h.attr&&h.attr.style?Object.keys(h.style).reduce((function(e,t){return(e?e+";":"")+cssCase(t)+":"+h.style[t]+";"}),""):""),(w.properties&&w.properties.href||w.href)&&"div"===d&&(d="a"),"a"===d&&(d=Link);var x=u.children||w.children||[];return core.jsx(React__default.Fragment,null,core.jsx(core.ClassNames,null,(function(e){var n=e.css;e.cx;if(!a.props.emailMode){var r=" "+n(a.emotionCss);w.class&&(w.class+=r),w.className&&(w.className+=r)}return core.jsx(BuilderAsyncRequestsContext.Consumer,null,(function(e){return a._asyncRequests=e&&e.requests,a._errors=e&&e.errors,a._logs=e&&e.logs,_?core.jsx(d,__assign({},w)):o&&(y||a.props.emailMode)?core.jsx(o,__assign({},b,{attributes:w,builderBlock:u,builderState:a.privateState})):core.jsx(d,__assign({},w),o&&core.jsx(o,__assign({builderState:a.privateState,builderBlock:u},b)),u.text||h.text?h.text:!o&&x&&Array.isArray(x)&&x.length?x.map((function(e,n){return core.jsx(t,{key:(a.id||"")+n,block:e,index:n,size:a.props.size,fieldName:a.props.fieldName,child:a.props.child,emailMode:a.props.emailMode})})):null)}))})))},Object.defineProperty(t.prototype,"id",{get:function(){var e=this.block;return e.id.startsWith("builder")?e.id:"builder-"+e.id},enumerable:!0,configurable:!0}),t.prototype.contents=function(e){var t=this,n=this.block;if(this.privateState=e,n.repeat&&n.repeat.collection){var r=n.repeat.collection,i=last((r||"").trim().split("(")[0].trim().split(".")),s=n.repeat.itemName||(i?i+"Item":"item"),a=this.stringToFunction(r)(e.state,null,n,api(),Device,null,sdk.Builder,this.privateState.context);return Array.isArray(a)?a.map((function(n,r){var i,a=__assign(__assign({},e.state),((i={$index:r,$item:n})[s]=n,i["$"+s+"Index"]=r,i));return core.jsx(BuilderStoreContext.Provider,{key:r,value:__assign(__assign({},e),{state:a})},t.getElement(r,a))})):null}return this.getElement()},t.prototype.render=function(){var e=this;return this.state.hasError?core.jsx("span",{css:{display:"inline-block",padding:5,color:"#999",fontSize:11,fontStyle:"italic"}},"Builder block error :( Check console for details"):core.jsx(BuilderStoreContext.Consumer,null,(function(t){return e.contents(t)}))},t}(React__default.Component),BuilderBlocks=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClickEmptyBlocks=function(){var e;sdk.Builder.isIframe&&t.noBlocks&&(null===(e=window.parent)||void 0===e||e.postMessage({type:"builder.clickEmptyBlocks",data:{parentElementId:t.parentId,dataPath:t.path}},"*"))},t}return __extends(t,e),Object.defineProperty(t.prototype,"isRoot",{get:function(){return!this.props.child},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"noBlocks",{get:function(){var e=this.props.blocks;return!(e&&e.length)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){var e=this.props.dataPath||"";return e.trim()&&(e.startsWith("this.")?e=e.replace("this.",""):e.startsWith("component.options.")||(e="component.options."+e)),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentId",{get:function(){return this.props.parentElementId?this.props.parentElementId:this.props.parent&&this.props.parent.id},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=this,t=this.props.blocks,n=this.props.emailMode?"span":"div";return core.jsx(n,{className:"builder-blocks"+(this.noBlocks?" no-blocks":"")+(this.props.child?" builder-blocks-child":"")+(this.props.className?" "+this.props.className:""),"builder-type":"blocks","builder-path":sdk.Builder.isIframe?this.path:void 0,css:__assign(__assign({},!this.props.emailMode&&{display:"flex",flexDirection:"column",alignItems:"stretch"}),this.props.style),onClick:function(){e.noBlocks&&e.onClickEmptyBlocks()}},t&&Array.isArray(t)&&t.map((function(t,n){return t&&"@builder.io/sdk:Element"===t["@type"]?core.jsx(BuilderBlock,{key:t.id,block:t,index:n,fieldName:e.props.fieldName,child:e.props.child,emailMode:e.props.emailMode}):t}))||t)},t}(React__default.Component),NoWrap=function(e){return e.children};function getData(e){if(void 0!==(null==e?void 0:e.data)){var t=__assign(__assign({},e.data),{blocks:e.data.blocks||JSON.parse(e.data.blocksString)});return delete t.blocksString,t}}var variantsScript=function(e,t){return("\n(function() {\n  if (window.builderNoTrack) {\n    return;\n  }\n\n  var variants = "+e+';\n  function removeVariants() {\n    variants.forEach((template) => {\n      document.querySelector(\'template[data-template-variant-id="\' + template.id + \'"]\').remove();\n    });\n  }\n\n  if (typeof document.createElement("template").content === \'undefined\') {\n    removeVariants();\n    return ;\n  }\n\n  function setCookie(name,value,days) {\n    var expires = "";\n    if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + (days*24*60*60*1000));\n        expires = "; expires=" + date.toUTCString();\n    }\n    document.cookie = name + "=" + (value || "")  + expires + "; path=/" + "; Secure; SameSite=None";\n  }\n\n  function getCookie(name) {\n    var nameEQ = name + "=";\n    var ca = document.cookie.split(\';\');\n    for(var i=0;i < ca.length;i++) {\n        var c = ca[i];\n        while (c.charAt(0)==\' \') c = c.substring(1,c.length);\n        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\n    }\n    return null;\n  }\n  var cookieName = \'builder.tests.'+t+"';\n  var variantInCookie = getCookie(cookieName);\n  var availableIDs = variants.map(function(vr) { return vr.id }).concat('"+t+"');\n  var variantId;\n  if (availableIDs.indexOf(variantInCookie) > -1) {\n    variantId = variantInCookie;\n  }\n  if (!variantId) {\n    var n = 0;\n    var set = false;\n    var random = Math.random();\n    for (var i = 0; i < variants.length; i++) {\n      var variant = variants[i];\n      var testRatio = variant.testRatio;\n      n += testRatio;\n      if (random < n) {\n        setCookie(cookieName, variant.id);\n        variantId = variant.id;\n        break;\n      }\n    }\n    if (!variantId) {\n      variantId = \""+t+'";\n      setCookie(cookieName, "'+t+'");\n    }\n  }\n  if (variantId && variantId !== "'+t+"\") {\n    var winningTemplate = document.querySelector('template[data-template-variant-id=\"' + variantId + '\"]');\n    if (winningTemplate) {\n      var parentNode = winningTemplate.parentNode;\n      var newParent = parentNode.cloneNode(false);\n      newParent.appendChild(winningTemplate.content.firstChild);\n      parentNode.parentNode.replaceChild(newParent, parentNode);\n    }\n  } else if (variants.length > 0) {\n    removeVariants();\n  }\n})()").replace(/\s+/g," ")},VariantsProvider=function(e){var t=e.initialContent,n=e.children;if(!Boolean(Object.keys((null==t?void 0:t.variations)||{}).length))return n([t]);var r=Object.keys(t.variations).map((function(e){return __assign(__assign({id:e},t.variations[e]),{data:getData(t.variations[e])})})),i=__spreadArrays(r,[t]);if(sdk.Builder.isServer){var s=JSON.stringify(Object.keys(t.variations||{}).map((function(e){return{id:e,testRatio:t.variations[e].testRatio}})));return React.createElement(React.Fragment,null,n(i,(function(){return React.createElement("script",{dangerouslySetInnerHTML:{__html:variantsScript(s,t.id)}})})))}var a="builder.tests."+t.id,o=sdk.builder.getCookie(a);if(!o&&sdk.Builder.isBrowser)for(var l=0,u=Math.random(),d=0;d<r.length;d++){var c=r[d];if(u<(l+=c.testRatio)){sdk.builder.setCookie(a,c.id),o=c.id;break}}return o||(o=t.id,sdk.builder.setCookie(a,o)),n([i.find((function(e){return e.id===o}))])},BuilderContent=function(_super){function BuilderContent(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.ref=null,_this.state={loading:!0,data:null,updates:1},_this.onWindowMessage=function(event){var _a,message=event.data;if(message)switch(message.type){case"builder.patchUpdates":var data=message.data;if(!data||!data.data)break;var patches=data.data[null===(_a=_this.state.data)||void 0===_a?void 0:_a.id];if(!patches||!patches.length)return;location.href.includes("builder.debug=true")&&eval("debugger");for(var _i=0,patches_1=patches;_i<patches_1.length;_i++){var patch=patches_1[_i];applyPatchWithMinimalMutationChain(_this.state.data,patch)}_this.setState({updates:_this.state.updates+1,data:_this.state.data?__assign({},_this.state.data):_this.state.data}),_this.props.contentLoaded&&_this.props.contentLoaded(_this.state.data.data,_this.state.data)}},_this.subscriptions=new sdk.Subscription,_this.firstLoad=!0,_this.clicked=!1,_this.trackedImpression=!1,_this.intersectionObserver=null,_this.onClick=function(e){var t=e.nativeEvent,n=_this.data;n&&(sdk.builder.autoTrack&&_this.builder.trackInteraction(n.id,_this.renderedVairantId,_this.clicked,t,{content:n}),_this.clicked||(_this.clicked=!0))},_this}return __extends(BuilderContent,_super),Object.defineProperty(BuilderContent.prototype,"builder",{get:function(){return this.props.builder||sdk.builder},enumerable:!0,configurable:!0}),Object.defineProperty(BuilderContent.prototype,"renderedVairantId",{get:function(){var e,t,n=this.props.isStatic?this.builder.getCookie("builder.tests."+(null===(e=this.data)||void 0===e?void 0:e.id)):null===(t=this.data)||void 0===t?void 0:t.variationId;if(null!==n)return n},enumerable:!0,configurable:!0}),Object.defineProperty(BuilderContent.prototype,"options",{get:function(){var e,t=__assign({},this.props.options||{});return this.props.content&&!(null===(e=t.initialContent)||void 0===e?void 0:e.length)&&(t.initialContent=[this.props.content]),t},enumerable:!0,configurable:!0}),Object.defineProperty(BuilderContent.prototype,"data",{get:function(){var e=this.state.data;return(this.props.inline||!sdk.Builder.isBrowser||this.firstLoad)&&this.options.initialContent&&this.options.initialContent[0]||e},enumerable:!0,configurable:!0}),BuilderContent.prototype.componentDidMount=function(){var e,t;if(!this.props.inline||sdk.Builder.isEditing)this.subscribeToContent();else if(this.props.inline&&(null===(t=null===(e=this.options)||void 0===e?void 0:e.initialContent)||void 0===t?void 0:t.length)){var n=this.options.initialContent[0];this.builder.trackImpression(n.id,this.renderedVairantId,void 0,{content:n})}sdk.Builder.isEditing&&addEventListener("message",this.onWindowMessage)},BuilderContent.prototype.subscribeToContent=function(){var e=this;"_inline"!==this.props.modelName&&this.subscriptions.add(sdk.builder.queueGetContent(this.props.modelName,this.options).subscribe((function(t){var n=t&&t[0];if(e.setState({data:n}),n&&e.firstLoad){if(sdk.builder.autoTrack){var r=!1;if("function"==typeof IntersectionObserver&&e.ref)try{(e.intersectionObserver=new IntersectionObserver((function(t,r){t.forEach((function(t){t.intersectionRatio>0&&!e.trackedImpression&&(e.builder.trackImpression(n.id,e.renderedVairantId,void 0,{content:e.data}),e.data,e.trackedImpression=!0,e.ref&&r.unobserve(e.ref))}))}))).observe(e.ref),r=!0}catch(e){console.warn("Could not bind intersection observer")}r||(e.trackedImpression=!0,e.builder.trackImpression(n.id,e.renderedVairantId,void 0,{content:n}))}e.firstLoad=!1}e.props.contentLoaded&&e.props.contentLoaded(n&&n.data,n)}),(function(t){e.props.contentError&&e.props.contentError(t)})))},BuilderContent.prototype.componentWillUnmount=function(){sdk.Builder.isEditing&&removeEventListener("message",this.onWindowMessage),this.subscriptions.unsubscribe(),this.intersectionObserver&&this.ref&&this.intersectionObserver.unobserve(this.ref)},BuilderContent.prototype.render=function(){var e=this;if(this.props.dataOnly)return null;var t=this.state.loading,n=this.data,r=this.props.dataOnly?NoWrap:"div";return this.props.isStatic?React__default.createElement(VariantsProvider,{initialContent:n},(function(i,s){return React__default.createElement(React__default.Fragment,null,i.map((function(a,o){var l=o===i.length-1?React__default.Fragment:"template";return React__default.createElement(React__default.Fragment,{key:String((null==a?void 0:a.id)+o)},"template"!==l&&(null==s?void 0:s()),React__default.createElement(l,__assign({key:String((null==a?void 0:a.id)+o)},"template"===l&&{"data-template-variant-id":null==a?void 0:a.id}),React__default.createElement(r,__assign({},0===o&&!e.props.dataOnly&&{ref:function(t){return e.ref=t}},{className:"builder-content",onClick:e.onClick,"builder-content-id":null==a?void 0:a.id,"builder-model":e.props.modelName}),e.props.children(null==a?void 0:a.data,!e.props.inline&&t,n))))})))})):React__default.createElement(r,__assign({},!this.props.dataOnly&&{ref:function(t){return e.ref=t}},{className:"builder-content",onClick:this.onClick,"builder-content-id":null==n?void 0:n.id,"builder-model":this.props.modelName}),this.props.children(null==n?void 0:n.data,!this.props.inline&&t,n))},BuilderContent}(React__default.Component);function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var onChange_1=createCommonjsModule((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Symbol("target"),r=Symbol("unsubscribe"),i=function(e,t){return t&&t.toString&&(e&&(e+="."),e+=t.toString()),e},s=function(e){return Array.isArray(e)?e.slice():Object.assign({},e)},a=function(e,t,a){if("undefined"==typeof Proxy)return e;void 0===a&&(a={});var o,l,u=Symbol("ProxyTarget"),d=!1,c=!1,p=!1,f=a.equals||Object.is,h=new WeakMap,v=new WeakMap,m=new WeakMap,g=function(e,n,r,a){if(!p)if(d){if(d&&l&&void 0!==r&&void 0!==a&&"length"!==n){var u=l;e!==o&&function(e,t){for(var n;e;)-1===(n=e.indexOf("."))&&(n=e.length),t(e.slice(0,n)),e=e.slice(n+1)}(e=e.replace(o,"").slice(1),(function(e){u[e]=s(u[e]),u=u[e]})),u[n]=r}c=!0}else t(i(e,n),a,r)},b=function(e,t){var n=h?h.get(e):void 0;n&&n.delete(t)},_=function(e,t){if(p)return e;v.set(e,t);var n=m.get(e);return void 0===n&&(n=new Proxy(e,k),m.set(e,n)),n},y=function(e){return p||!0===a.ignoreSymbols&&"symbol"==typeof e},k={get:function(e,t,s){if(t===u||t===n)return e;if(t===r&&""===v.get(e))return function(e){return p=!0,h=null,v=null,m=null,e}(e);var o=Reflect.get(e,t,s);if(function(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(o)||function(e){return e instanceof RegExp||e instanceof Number}(o)||"constructor"===t||!0===a.isShallow)return o;var l=function(e,t){var n=h?h.get(e):void 0;if(n)return n;n=new Map,h.set(e,n);var r=n.get(t);return r||(r=Reflect.getOwnPropertyDescriptor(e,t),n.set(t,r)),r}(e,t);if(l&&!l.configurable){if(l.set&&!l.get)return;if(!1===l.writable)return o}return _(o,i(v.get(e),t))},set:function(e,t,n,r){n&&void 0!==n[u]&&(n=n[u]);var i=y(t),s=i?null:Reflect.get(e,t,r),a=Reflect.set(e[u]||e,t,n);return i||f(s,n)||g(v.get(e),t,s,n),a},defineProperty:function(e,t,n){var r=Reflect.defineProperty(e,t,n);return y(t)||(b(e,t),g(v.get(e),t,void 0,n.value)),r},deleteProperty:function(e,t){if(!Reflect.has(e,t))return!0;var n=y(t),r=n?null:Reflect.get(e,t),i=Reflect.deleteProperty(e,t);return n||(b(e,t),g(v.get(e),t,r)),i},apply:function(e,t,n){var r=t instanceof Date;if(r&&(t=t[u]),!d){d=!0,r&&(l=t.valueOf()),(Array.isArray(t)||"[object Object]"===toString.call(t))&&(l=s(t[u])),o=(o=v.get(e)).slice(0,Math.max(o.lastIndexOf("."),0));var i=Reflect.apply(e,t,n);return d=!1,(c||r&&!f(l,t.valueOf()))&&(g(o,"",l,t[u]||t),l=null,c=!1),i}return Reflect.apply(e,t,n)}},S=_(e,"");return t=t.bind(S),S};a.target=function(e){return e[n]||e},a.unsubscribe=function(e){return e[r]||e},e.exports=a,t.default=a})),onChange=unwrapExports(onChange_1),nextTick=sdk.Builder.nextTick;function debounceNextTick(e,t,n){return void 0===t&&"function"==typeof e?debounceNextTickImpl(e):{configurable:!0,enumerable:n.enumerable,get:function(){return Object.defineProperty(this,t,{configurable:!0,enumerable:n.enumerable,value:debounceNextTickImpl(n.value)}),this[t]}}}function debounceNextTickImpl(e){var t=null,n=null;return function(){var e=t;if(t=[].slice.call(arguments),n=this,null!==e)return;nextTick(r)};function r(){e.apply(n,t),t=null,n=null}}function throttle(e,t,n){var r,i,s;void 0===n&&(n={});var a=null,o=0,l=function(){o=!1===n.leading?0:Date.now(),a=null,s=e.apply(r,i),a||(r=i=null)};return function(){var u=Date.now();o||!1!==n.leading||(o=u);var d=t-(u-o);return r=this,i=arguments,d<=0||d>t?(a&&(clearTimeout(a),a=null),o=u,s=e.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(l,d)),s}}var BuilderMetaContext=React__default.createContext({emailMode:!1,ampMode:!1,isServer:!1}),size=function(e){return Object.keys(e).length};function debounce(e,t,n){var r;return void 0===n&&(n=!1),function(){var i=this,s=arguments;clearTimeout(r),r=setTimeout((function(){r=null,n||e.apply(i,s)}),t),n&&!r&&e.apply(i,s)}}var fontsLoaded=new Set;function pick$1(e,t){return t.reduce((function(t,n){return e&&e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var fetch=sdk.Builder.isBrowser?window.fetch:require("node-fetch"),sizeMap={desktop:"large",tablet:"medium",mobile:"small"};function decorator(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(3===t.length){var r=t[0],i=t[1],s=t[2];if(s&&(s.value||s.get))return t=[],a(r,i,s)}return a;function a(n,r,i){var s,a=i.value?"value":"get";return __assign(__assign({},i),((s={})[a]=e.apply(void 0,__spreadArrays([i[a]],t)),s))}}}var Throttle=decorator(throttle),fetchCache={},tryEval=function(e,t,n){void 0===t&&(t={});var r=e;if("string"==typeof r&&r.trim()){var i=!(r.includes(";")||r.includes(" return ")),s=function(){};try{sdk.Builder.isBrowser&&(s=new Function("state","var rootState = state;\n        if (typeof Proxy !== 'undefined') {\n          rootState = new Proxy(rootState, {\n            set: function () {\n              return false;\n            },\n            get: function (target, key) {\n              if (key === 'state') {\n                return state;\n              }\n              return target[key]\n            }\n          });\n        }\n        with (rootState) {\n          "+(i?"return ("+e+");":e)+";\n        }"))}catch(e){sdk.Builder.isBrowser&&console.warn("Could not compile javascript",e)}try{return sdk.Builder.isBrowser?s(t||{}):new(0,safeDynamicRequire("vm2").VM)({sandbox:__assign(__assign({},t),{state:t})}).run(r.replace(/(^|;)return /,"$1"))}catch(t){n&&n.push(t),sdk.Builder.isBrowser?console.warn("Builder custom code error:",t.message,"in",e,t.stack):process.env.DEBUG&&console.debug("Builder custom code error:",t.message,"in",e,t.stack)}}};function searchToObject(e){var t=(e.search||"").substring(1).split("&"),n={};for(var r in t)if(t[r]&&"string"==typeof t[r]){var i=t[r].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return n}var BuilderPage=function(e){function t(t){var n=e.call(this,t)||this;if(n.subscriptions=new sdk.Subscription,n.onStateChange=new sdk.BehaviorSubject(null),n.asServer=sdk.Builder.isServer,n.contentRef=null,n.styleRef=null,n.rootState=sdk.Builder.isServer?{}:onChange({},(function(){return n.updateState()})),n.lastJsCode="",n.lastHttpRequests={},n.httpSubscriptionPerKey={},n.ref=null,n.messageListener=function(e){var t=e.data;switch(t.type){case"builder.updateSpacer":var r=t.data;n.rootState._spacer;n.updateState((function(e){e._spacer=r}));break;case"builder.resetState":var i=t.data,s=i.state;if(i.model===n.name){for(var a in n.rootState)"function"!=typeof n.rootState[a]&&delete n.rootState[a];Object.assign(n.rootState,s),n.setState(__assign(__assign({},n.state),{state:n.rootState,updates:(n.state&&n.state.updates||0)+1}))}break;case"builder.resetSymbolState":var o=t.data.state,l=(s=o.state,o.model,o.id);if(n.props.builderBlock&&n.props.builderBlock===l){for(var a in n.rootState)delete n.rootState[a];Object.assign(n.rootState,s),n.setState(__assign(__assign({},n.state),{state:n.rootState,updates:(n.state&&n.state.updates||0)+1}))}}},n.resizeFn=function(){var e=n.deviceSizeState;e!==n.state.state.deviceSize&&n.setState(__assign(__assign({},n.state),{updates:(n.state&&n.state.updates||0)+1,state:Object.assign(n.rootState,__assign(__assign({},n.state.state),{deviceSize:e}))}))},n.resizeListener=sdk.Builder.isEditing?throttle(n.resizeFn,200):debounce(n.resizeFn,400),n.mounted=!1,n.updateState=function(e){var t=n.rootState;e&&e(t),n.mounted?n.setState({update:n.updateState,state:t,updates:(n.state&&n.state.updates||0)+1}):n.state=__assign(__assign({},n.state),{update:n.updateState,state:t,updates:(n.state&&n.state.updates||0)+1}),n.notifyStateChange()},n.onContentLoaded=function(e,t){if("page"===n.name&&sdk.Builder.isBrowser&&e){var r=e.title,i=e.pageTitle,s=e.description,a=e.pageDescription;if((r||i)&&(document.title=r||i),s||a){var o=document.querySelector('meta[name="description"]');o||((o=document.createElement("meta")).setAttribute("name","description"),document.head.appendChild(o)),o.setAttribute("content",s||a)}}if(sdk.Builder.isEditing&&n.notifyStateChange(),n.props.contentLoaded&&n.props.contentLoaded(e,t),e&&e.inputs&&Array.isArray(e.inputs)&&e.inputs.length&&(e.state||(e.state={}),e.inputs.forEach((function(t){t&&t.name&&void 0!==t.defaultValue&&void 0===e.state[t.name]&&(e.state[t.name]=t.defaultValue)}))),e&&e.state){var l=__assign(__assign({},n.state),{updates:(n.state&&n.state.updates||0)+1,state:Object.assign(n.rootState,__assign(__assign(__assign(__assign({},n.state.state),{location:n.locationState,deviceSize:n.deviceSizeState,device:n.device}),e.state),n.props.data))});n.mounted?n.setState(l):n.state=l}if(e&&e.jsCode&&sdk.Builder.isBrowser){var u=!1;if(sdk.Builder.isEditing&&(n.lastJsCode===e.jsCode?u=!0:n.lastJsCode=e.jsCode),!u){var d=n.state.state;try{new Function("data","ref","state","update","element","Builder","builder","context",e.jsCode)(e,n,d,n.state.update,n.ref,sdk.Builder,sdk.builder,n.state.context)}catch(t){sdk.Builder.isBrowser?console.warn("Builder custom code error:",t.message,"in",e.jsCode,t.stack):process.env.DEBUG&&console.debug("Builder custom code error:",t.message,"in",e.jsCode,t.stack)}}}if(e&&e.httpRequests&&!n.props.noAsync&&!(u=!1)){var c=function(t){var r=e.httpRequests[t];if(r&&(!n.data[t]||sdk.Builder.isEditing))if(sdk.Builder.isBrowser){var i=n.evalExpression(r);if(sdk.Builder.isEditing&&n.lastHttpRequests[t]===i)return"continue";n.lastHttpRequests[t]=i;var s=r.match(/builder\.io\/api\/v2\/([^\/\?]+)/i);s&&s[1];n.throttledHandleRequest(t,i);var a=n.httpSubscriptionPerKey[t];a&&a.unsubscribe();var o=n.httpSubscriptionPerKey[t]=n.onStateChange.subscribe((function(){var e=n.evalExpression(r);e!==i&&(n.throttledHandleRequest(t,e),n.lastHttpRequests[t]=e)}));n.subscriptions.add(o)}else n.handleRequest(t,n.evalExpression(r))};for(var p in e.httpRequests)c(p)}},n.state={context:t.context||{},state:Object.assign(n.rootState,__assign(__assign(__assign(__assign({},n.props.content&&n.props.content.data&&n.props.content.data.state),{isBrowser:sdk.Builder.isBrowser,isServer:!sdk.Builder.isBrowser,_hydrate:t.hydrate,location:n.locationState,deviceSize:n.deviceSizeState,device:n.device}),n.getHtmlData()),t.data)),updates:0,key:0,update:n.updateState},sdk.Builder.isBrowser){var r=n.props.apiKey;if(r&&r!==n.builder.apiKey&&(n.builder.apiKey=r),n.props.content){var i=n.props.content.content||n.props.content;n.onContentLoaded(null==i?void 0:i.data,i)}}return n}return __extends(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this.props.model||this.props.modelName||this.props.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.ref},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"builder",{get:function(){return this.props.builder||sdk.builder},enumerable:!0,configurable:!0}),t.prototype.getHtmlData=function(){var e=this.props.content&&this.props.content.id||this.props.entry,t=e&&sdk.Builder.isBrowser&&document.querySelector('script[data-builder-json="'+e+'"],script[data-builder-state="'+e+'"]');if(t)try{return JSON.parse(t.innerText)}catch(e){console.warn("Could not parse Builder.io HTML data transfer",e,t.innerText)}return{}},Object.defineProperty(t.prototype,"device",{get:function(){return this.builder.getUserAttributes().device||"desktop"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"locationState",{get:function(){return __assign(__assign({},pick$1(this.location,["pathname","hostname","search","host"])),{path:this.location.pathname&&this.location.pathname.split("/").slice(1)||"",query:searchToObject(this.location)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deviceSizeState",{get:function(){return sdk.Builder.isBrowser?sizes.getSizeForWidth(window.innerWidth):sizeMap[this.device]||"large"},enumerable:!0,configurable:!0}),t.renderInto=function(e,n,r,i){if(void 0===n&&(n={}),void 0===r&&(r=!0),void 0===i&&(i=!1),console.debug("BuilderPage.renderInto",e,n,r,this),e){var s=null;if("string"==typeof e?s=document.querySelector(e):e instanceof Element&&(s=e),s){var a=s.classList.contains("builder-hydrated");if(!a||i){s.classList.add("builder-hydrated");var o=r&&s.innerHTML.includes("builder-block");if(!s.classList.contains("builder-component")){var l=s.querySelector(".builder-api-styles")||(s.previousElementSibling&&s.previousElementSibling.matches(".builder-api-styles")?s.previousElementSibling:null),u="";if(l)l.innerHTML.replace(/\/\*start:([^\*]+?)\*\/([\s\S]*?)\/\*end:([^\*]+?)\*\//g,(function(e,t,n){var r=null;try{r=document.querySelector('[data-emotion-css="'+t+'"]')}catch(e){console.warn(e)}return r?r.innerHTML=n:sdk.Builder.isEditing||(u+=e),e})),sdk.Builder.nextTick((function(){l.innerHTML=u}));var d=s.querySelector(".builder-component");d?s=d:o=!1}location.search.includes("builder.debug=true")&&console.debug("hydrate",o,s);var c=s;if(!a){var p=document.createElement("div");s.insertAdjacentElement("beforebegin",p),p.appendChild(s),c=p}if((sdk.Builder.isEditing||sdk.Builder.isBrowser&&location.search.includes("builder.preview="))&&(o=!1),o&&s){var f=ReactDOM.render(React__default.createElement(t,__assign({},n)),c,c.builderRootRef);return c.builderRootRef=f,f}var h=ReactDOM.render(React__default.createElement(t,__assign({},n)),c,c.builderRootRef);return c.builderRootRef=h,h}console.debug("Tried to hydrate multiple times")}}},t.prototype.componentDidMount=function(){var e,t=this;this.mounted=!0,this.asServer&&(this.asServer=!1,this.updateState((function(e){e.isBrowser=!0,e.isServer=!1}))),sdk.Builder.isIframe&&(null===(e=window.parent)||void 0===e||e.postMessage({type:"builder.sdkInjected",data:{modelName:this.name}},"*")),sdk.Builder.isBrowser&&(window.addEventListener("resize",this.resizeListener),sdk.Builder.isEditing&&window.addEventListener("message",this.messageListener),setTimeout((function(){window.dispatchEvent(new CustomEvent("builder:component:load",{detail:{ref:t}}))})))},t.prototype.notifyStateChange=function(){if(!sdk.Builder.isServer&&this&&this.state){var e=this.state.state;this.props.onStateChange&&this.props.onStateChange(e),sdk.Builder.isBrowser&&window.dispatchEvent(new CustomEvent("builder:component:stateChange",{detail:{state:e,ref:this}})),this.onStateChange.next(e)}},t.prototype.processStateFromApi=function(e){return e},Object.defineProperty(t.prototype,"location",{get:function(){return this.props.location||(sdk.Builder.isBrowser?location:{})},enumerable:!0,configurable:!0}),t.prototype.getCssFromFont=function(e,t){var n=e.family+(e.kind&&!e.kind.includes("#")?", "+e.kind:""),r=n.split(",")[0],i=e.fileUrl?e.fileUrl:e.files&&e.files.regular,s="";if(i&&n&&r&&(s+=('\n@font-face {\n  font-family: "'+n+'";\n  src: local("'+r+"\"), url('"+i+"') format('woff2');\n  font-display: fallback;\n  font-weight: 400;\n}\n        ").trim()),e.files)for(var a in e.files){if(String(Number(a))===a){var o=e.files[a];o&&o!==i&&(s+=('\n@font-face {\n  font-family: "'+n+"\";\n  src: url('"+o+"') format('woff2');\n  font-display: fallback;\n  font-weight: "+a+";\n}\n          ").trim())}}return s},t.prototype.componentWillUnmount=function(){this.unsubscribe(),sdk.Builder.isBrowser&&(window.removeEventListener("resize",this.resizeListener),window.removeEventListener("message",this.messageListener))},t.prototype.getFontCss=function(e){var t=this;return this.builder.allowCustomFonts&&(null==e?void 0:e.customFonts)&&e.customFonts.length&&e.customFonts.map((function(n){return t.getCssFromFont(n,e)})).join(" ")||""},t.prototype.ensureFontsLoaded=function(e){if(this.builder.allowCustomFonts&&(null==e?void 0:e.customFonts)&&Array.isArray(e.customFonts))for(var t=0,n=e.customFonts;t<n.length;t++){var r=n[t],i=r.fileUrl?r.fileUrl:r.files&&r.files.regular;if(!fontsLoaded.has(i)){var s=this.getCssFromFont(r,e);if(fontsLoaded.add(i),!s)continue;var a=document.createElement("style");a.className="builder-custom-font",a.setAttribute("data-builder-custom-font",i),a.innerHTML=s,document.head.appendChild(a)}}},t.prototype.getCss=function(e){var t,n=null===(t=this.useContent)||void 0===t?void 0:t.id,r=(null==e?void 0:e.cssCode)||"";return n&&(r=r.replace(/&/g,".builder-component-"+n)),r+this.getFontCss(e)},Object.defineProperty(t.prototype,"data",{get:function(){var e,t=__assign(__assign(__assign({},this.props.content&&(null===(e=this.props.content.data)||void 0===e?void 0:e.state)),this.props.data),this.state.state);return Object.assign(this.rootState,t),t},enumerable:!0,configurable:!0}),t.prototype.componentDidUpdate=function(e){var t=this;this.props.data&&e.data!==this.props.data&&this.state.update((function(e){Object.assign(e,t.props.data)})),sdk.Builder.isEditing&&this.props.content&&e.content!==this.props.content&&this.onContentLoaded(this.props.content.data,this.props.content)},t.prototype.checkStyles=function(e){if(this.styleRef){var t=this.getCss(e);this.styleRef.innerHTML!==t&&(this.styleRef.innerHTML=t)}},t.prototype.reload=function(){this.setState({key:this.state.key+1})},Object.defineProperty(t.prototype,"content",{get:function(){var e=this.props.content;return e&&e.content&&(e=__assign(__assign({},e),{data:e.content})),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useContent",{get:function(){return this.content||this.state.context.builderContent},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e,t=this,n=this.content,r=sdk.Builder.isBrowser&&this.props.data&&size(this.props.data)&&hash(this.props.data),i=sdk.Builder.isEditing?this.name:this.props.entry;i&&!sdk.Builder.isEditing&&r&&r.length<300&&(i+=":"+r);var s=this.props.dataOnly?React__default.Fragment:"div",a=null===(e=this.useContent)||void 0===e?void 0:e.id;return React__default.createElement(s,{className:"builder-component "+(a?"builder-component-"+a:""),"data-name":this.name,"data-source":"Rendered by Builder.io on "+(new Date).toUTCString(),key:this.state.key,ref:function(e){return t.ref=e}},React__default.createElement(BuilderMetaContext.Consumer,null,(function(e){return React__default.createElement(BuilderMetaContext.Provider,{value:"boolean"==typeof t.props.ampMode?__assign(__assign({},e),{ampMode:t.props.ampMode}):e},React__default.createElement(BuilderAsyncRequestsContext.Consumer,null,(function(e){var r;return t._asyncRequests=e&&e.requests,t._errors=e&&e.errors,t._logs=e&&e.logs,React__default.createElement(BuilderContent,{isStatic:t.props.isStatic||sdk.Builder.isStatic,key:(null===(r=t.props.content)||void 0===r?void 0:r.id)||("content"in t.props?"null-content-prop":"no-content-prop"),builder:t.builder,ref:function(e){return t.contentRef=e},contentLoaded:function(e,n){return t.onContentLoaded(e,n)},options:__assign(__assign(__assign(__assign({key:i,entry:t.props.entry},n&&{initialContent:[n]}),!n&&"content"in t.props&&{initialContent:[]}),t.props.url&&{url:t.props.url}),t.props.options),inline:t.props.inlineContent||!sdk.Builder.isEditing&&"content"in t.props,contentError:t.props.contentError,modelName:t.name||"page"},(function(e,n,r){var i;return t.props.dataOnly?null:(r&&r.id&&(t.state.context.builderContent=r),sdk.Builder.isBrowser&&sdk.Builder.nextTick((function(){t.checkStyles(e)})),e?React__default.createElement("div",{"data-builder-component":t.name,"data-builder-content-id":r.id,"data-builder-variation-id":r.testVariationId||r.variationId||r.id},t.getCss(e)&&React__default.createElement("style",{ref:function(e){return t.styleRef=e},className:"builder-custom-styles",dangerouslySetInnerHTML:{__html:t.getCss(e)}}),React__default.createElement(BuilderStoreContext.Provider,{value:__assign(__assign({},t.state),{rootState:t.rootState,state:t.data,content:r,renderLink:t.props.renderLink})},React__default.createElement(BuilderBlocks,{key:String(!!(null===(i=null==e?void 0:e.blocks)||void 0===i?void 0:i.length)),emailMode:t.props.emailMode,fieldName:"blocks",blocks:e.blocks}))):n?React__default.createElement("div",{"data-builder-component":t.name,className:"builder-loading"},t.props.children):React__default.createElement("div",{"data-builder-component":t.name,className:"builder-no-content"}))}))})))})))},t.prototype.evalExpression=function(e){var t=this,n=this.data;return e.replace(/{{([^}]+)}}/g,(function(e,r){return tryEval(r,n,t._errors)}))},t.prototype.throttledHandleRequest=function(e,t){return this.handleRequest(e,t)},t.prototype.handleRequest=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,r,i,s,a=this;return __generator(this,(function(o){return sdk.Builder.isIframe&&fetchCache[t]?(this.updateState((function(n){n[e]=fetchCache[t]})),[2,fetchCache[t]]):(n=function(){return __awaiter(a,void 0,void 0,(function(){var n,r,i;return __generator(this,(function(s){switch(s.label){case 0:n=Date.now(),sdk.Builder.isBrowser||console.time("Fetch "+t),s.label=1;case 1:return s.trys.push([1,4,5,6]),[4,fetch(t)];case 2:return[4,s.sent().json()];case 3:return r=s.sent(),[3,6];case 4:return i=s.sent(),this._errors&&this._errors.push(i),this._logs&&this._logs.push("Fetch to "+t+" errored in "+(Date.now()-n)+"ms"),[2];case 5:return sdk.Builder.isBrowser||(console.timeEnd("Fetch "+t),this._logs&&this._logs.push("Fetched "+t+" in "+(Date.now()-n)+"ms")),[7];case 6:return r&&(sdk.Builder.isIframe&&(fetchCache[t]=r),this.updateState((function(t){t[e]=r}))),[2,r]}}))}))},(r=this._asyncRequests&&this._asyncRequests.find((function(e){return isRequestInfo(e)&&e.url===t})))?((i=r.promise).then((function(t){t&&a.updateState((function(n){n[e]=t}))})),[2,i]):(s=n(),sdk.Builder.nextTick((function(){a._asyncRequests&&a._asyncRequests.push(s)})),[2,s]))}))}))},t.prototype.unsubscribe=function(){this.subscriptions&&(this.subscriptions.unsubscribe(),this.subscriptions=new sdk.Subscription)},t.prototype.handleBuilderRequest=function(e,t){var n=this,r=tryEval(t,this.data,this._errors);this.subscriptions&&this.unsubscribe(),r&&this.subscriptions.add(this.builder.queueGetContent(r.model,r).subscribe((function(t){t&&n.updateState((function(n){n[e]=t}))})))},__decorate([debounceNextTick,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],t.prototype,"notifyStateChange",null),__decorate([Throttle(100,{leading:!0,trailing:!0}),__metadata("design:type",Function),__metadata("design:paramtypes",[String,String]),__metadata("design:returntype",void 0)],t.prototype,"throttledHandleRequest",null),t}(React__default.Component),withChildren=function(e){var t=React__default.forwardRef((function(t,n){var r=t.children||t.builderBlock&&t.builderBlock.children&&t.builderBlock.children.map((function(e){return React__default.createElement(BuilderBlock,{key:e.id,block:e})}));return React__default.createElement(e,__assign({},t,{ref:n}),r)}));return t.builderOptions={canHaveChildren:!0},t};sdk.Builder.isReact=!0,Object.defineProperty(exports,"Builder",{enumerable:!0,get:function(){return sdk.Builder}}),Object.defineProperty(exports,"builder",{enumerable:!0,get:function(){return sdk.builder}}),exports.BuilderAsyncRequestsContext=BuilderAsyncRequestsContext,exports.BuilderBlockComponent=BuilderBlock,exports.BuilderBlocks=BuilderBlocks,exports.BuilderComponent=BuilderPage,exports.BuilderContent=BuilderContent,exports.BuilderMetaContext=BuilderMetaContext,exports.BuilderPage=BuilderPage,exports.BuilderStoreContext=BuilderStoreContext,exports.default=sdk.builder,exports.stringToFunction=stringToFunction,exports.withChildren=withChildren;
//# sourceMappingURL=builder-react-lite.cjs.js.map
